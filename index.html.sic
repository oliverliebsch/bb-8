<!DOCTYPE html>
<html lang='de-DE'>
  <head>
    <meta charset='UTF-8'>
    <meta content='width=device-width' name='viewport'>
    <title>bb-8</title>
    <link rel='stylesheet' href='styles.css'>
    <script src='https://cdn.jsdelivr.net/lodash/4.17.2/lodash.min.js'></script>
    <script src='https://unpkg.com/vue@2.1.3/dist/vue.js'></script>
  </head>
  <body>
    <script type='text/x-template' id='template-controls'>
      <div>
        <button class='button' @click='addBlock("heading")'>Heading</button>
        <button class='button' @click='addBlock("subheading")'>Subheading</button>
        <button class='button' @click='addBlock("single-image")'>Image</button>
      </div>
    </script>

    <script type='text/x-template' id='template-bb8'>
      <div>
        <slot>
          <textarea name='text' v-model='json' rows='8' cols='100'></textarea>
        </slot>
        <controls :index='0'></controls>
        <hr>
        <div>
          <component v-bind:is='block.blocktype' v-for='(block, index) in blocks' :initialData='block' :index='index' :key='block.id'></component>
        </div>
      </div>
    </script>

    <script type='text/x-template' id='template-heading'>
      <div>
        <label>Heading</label>
        <input v-bind:value='block.text' v-on:input='updateText($event.target.value)'>
        <controls :index='index'></controls>
        <hr>
      </div>
    </script>

    <script type='text/x-template' id='template-subheading'>
      <div>
        <label>Subheading</label>
        <input v-bind:value='block.text' v-on:input='updateText($event.target.value)'>
        <controls :index='index'></controls>
        <hr>
      </div>
    </script>

    <script type='text/x-template' id='template-single-image'>
      <div>
        <label>Image</label>
        <input type='file' name='file' v-on:change='updateImage($event)'>
        <img v-bind:src='block.image'>
        <label>Alt</label>
        <input v-bind:value='block.text' v-on:input='updateText($event.target.value)'>
        <controls :index='index'></controls>
        <hr>
      </div>
    </script>

    <div id='app'>
      <bb8 initial-json='[{"blocktype":"heading","id":1,"text":"Test","size":"h2"},{"blocktype":"subheading","id":2,"text":"Blub","size":"h3"},{"blocktype":"heading","id":3,"text":"","size":""}]'></bb8>
    </div>
    <script src='bb-8.js'></script>
  </body>
</html>
